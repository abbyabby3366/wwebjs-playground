import"../chunks/CWj6FrbW.js";import{i as Re}from"../chunks/DbVienwh.js";import{aa as Ue,aS as ze,ag as Ie,aT as Je,aU as We,A as Be,C,aV as Ve,aW as Le,aX as Ge,D as Ke,n as pe,p as Xe,o as Ye,aY as Ze,aZ as He,f as L,h as Qe,g as e,l as K,a as E,b as et,$ as tt,e as l,c as s,s as b,m as z,r as n,j as q,k as F,w as at,u as rt,y as st,v as X}from"../chunks/CPPbwToL.js";import{i as M}from"../chunks/BBMtWJJw.js";import{e as ot}from"../chunks/HMgc3kw4.js";import{b as I,r as Y}from"../chunks/DF61nx8T.js";const it=()=>performance.now(),R={tick:r=>requestAnimationFrame(r),now:()=>it(),tasks:new Set};function De(){const r=R.now();R.tasks.forEach(a=>{a.c(r)||(R.tasks.delete(a),a.f())}),R.tasks.size!==0&&R.tick(De)}function nt(r){let a;return R.tasks.size===0&&R.tick(De),{promise:new Promise(i=>{R.tasks.add(a={c:r,f:i})}),abort(){R.tasks.delete(a)}}}function xe(r,a){Le(()=>{r.dispatchEvent(new CustomEvent(a))})}function lt(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const a=r.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("")}function Ee(r){const a={},i=r.split(";");for(const f of i){const[p,_]=f.split(":");if(!p||_===void 0)break;const g=lt(p.trim());a[g]=_.trim()}return a}const dt=r=>r;function he(r,a,i,f){var p=(r&Ve)!==0,_="both",g,k=a.inert,d=a.style.overflow,c,v;function A(){return Le(()=>g??(g=i()(a,(f==null?void 0:f())??{},{direction:_})))}var j={is_global:p,in(){a.inert=k,xe(a,"introstart"),c=Ce(a,A(),v,1,()=>{xe(a,"introend"),c==null||c.abort(),c=g=void 0,a.style.overflow=d})},out(w){a.inert=!0,xe(a,"outrostart"),v=Ce(a,A(),c,0,()=>{xe(a,"outroend"),w==null||w()})},stop:()=>{c==null||c.abort(),v==null||v.abort()}},D=Ue;if((D.transitions??(D.transitions=[])).push(j),ze){var $=p;if(!$){for(var m=D.parent;m&&m.f&Ie;)for(;(m=m.parent)&&!(m.f&Je););$=!m||(m.f&We)!==0}$&&Be(()=>{C(()=>j.in())})}}function Ce(r,a,i,f,p){var _=f===1;if(Ge(a)){var g,k=!1;return Ke(()=>{if(!k){var w=a({direction:_?"in":"out"});g=Ce(r,w,i,f,p)}}),{abort:()=>{k=!0,g==null||g.abort()},deactivate:()=>g.deactivate(),reset:()=>g.reset(),t:()=>g.t()}}if(i==null||i.deactivate(),!(a!=null&&a.duration))return p(),{abort:pe,deactivate:pe,reset:pe,t:()=>f};const{delay:d=0,css:c,tick:v,easing:A=dt}=a;var j=[];if(_&&i===void 0&&(v&&v(0,1),c)){var D=Ee(c(0,1));j.push(D,D)}var $=()=>1-f,m=r.animate(j,{duration:d,fill:"forwards"});return m.onfinish=()=>{m.cancel();var w=(i==null?void 0:i.t())??1-f;i==null||i.abort();var se=f-w,J=a.duration*Math.abs(se),Z=[];if(J>0){var oe=!1;if(c)for(var me=Math.ceil(J/16.666666666666668),W=0;W<=me;W+=1){var H=w+se*A(W/me),ie=Ee(c(H,1-H));Z.push(ie),oe||(oe=ie.overflow==="hidden")}oe&&(r.style.overflow="hidden"),$=()=>{var Q=m.currentTime;return w+se*A(Q/J)},v&&nt(()=>{if(m.playState!=="running")return!1;var Q=$();return v(Q,1-Q),!0})}m=r.animate(Z,{duration:J,fill:"forwards"}),m.onfinish=()=>{$=()=>f,v==null||v(f,1-f),p()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=pe)},deactivate:()=>{p=pe},reset:()=>{f===0&&(v==null||v(1,0))},t:()=>$()}}function ct(r){return function(...a){var i=a[0];return i.preventDefault(),r==null?void 0:r.apply(this,a)}}const ut=r=>r;function ft(r){const a=r-1;return a*a*a+1}function Ae(r){const a=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return a?[parseFloat(a[1]),a[2]||"px"]:[r,"px"]}function $e(r,{delay:a=0,duration:i=400,easing:f=ut}={}){const p=+getComputedStyle(r).opacity;return{delay:a,duration:i,easing:f,css:_=>`opacity: ${_*p}`}}function Fe(r,{delay:a=0,duration:i=400,easing:f=ft,x:p=0,y:_=0,opacity:g=0}={}){const k=getComputedStyle(r),d=+k.opacity,c=k.transform==="none"?"":k.transform,v=d*(1-g),[A,j]=Ae(p),[D,$]=Ae(_);return{delay:a,duration:i,easing:f,css:(m,w)=>`
			transform: ${c} translate(${(1-m)*A}${j}, ${(1-m)*D}${$});
			opacity: ${d-v*w}`}}function vt(r){return--r*r*r*r*r+1}var pt=L('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"> <button class="float-right font-bold">Ã—</button></div>'),mt=L('<div class="text-center py-8"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading contacts...</p></div>'),bt=L('<div class="text-center py-8"><p class="text-gray-500 text-lg"> </p></div>'),yt=L('<p class="text-gray-600 mb-2"><span class="font-medium">Email:</span> </p>'),gt=L('<p class="text-gray-600 mb-2"><span class="font-medium">Company:</span> </p>'),_t=L('<p class="text-gray-600 mb-2"><span class="font-medium">Notes:</span> </p>'),xt=L('<p class="text-gray-600 mb-2"><span class="font-medium">Label:</span> <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full"> </span></p>'),ht=L('<p class="text-gray-600 mb-2"><span class="font-medium">Assigned To:</span> </p>'),wt=L('<div class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow"><div class="flex justify-between items-start mb-4"><div><h3 class="text-lg font-semibold text-gray-900"> </h3> <p class="text-blue-600 font-medium"> </p></div> <div class="flex gap-2"><button class="text-blue-600 hover:text-blue-800 p-1" title="Edit contact">âœï¸</button> <button class="text-red-600 hover:text-red-800 p-1" title="Delete contact">ğŸ—‘ï¸</button></div></div> <!> <!> <!> <!> <!> <div class="text-xs text-gray-400 mt-4"> </div></div>'),Ct=L('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div>'),kt=L('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6"><div class="flex justify-between items-center mb-6"><h2 class="text-xl font-semibold text-gray-900"> </h2> <button class="text-gray-400 hover:text-gray-600 text-2xl">Ã—</button></div> <form class="space-y-4"><div><label for="name" class="block text-sm font-medium text-gray-700 mb-1">Name *</label> <input id="name" type="text" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div><label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone *</label> <input id="phone" type="tel" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div><label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label> <input id="email" type="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div><label for="company" class="block text-sm font-medium text-gray-700 mb-1">Company</label> <input id="company" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div><label for="notes" class="block text-sm font-medium text-gray-700 mb-1">Notes</label> <textarea id="notes" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea></div> <div><label for="label" class="block text-sm font-medium text-gray-700 mb-1">Label</label> <input id="label" type="text" placeholder="e.g., VIP, Customer, Lead" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div><label for="assignedTo" class="block text-sm font-medium text-gray-700 mb-1">Assigned To</label> <input id="assignedTo" type="text" placeholder="e.g., John Doe, Sales Team" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div class="flex gap-3 pt-4"><button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md font-medium transition-colors"> </button> <button type="button" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md font-medium transition-colors">Cancel</button></div></form></div></div>'),Tt=L('<div class="container mx-auto px-4 py-8"><div class="mb-8"><h1 class="text-3xl font-bold text-gray-900 mb-2">Contacts</h1> <p class="text-gray-600">Manage your internal contact list</p></div> <!> <div class="flex flex-col sm:flex-row gap-4 mb-6"><div class="flex-1"><input type="text" placeholder="Search contacts..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors">Add Contact</button></div> <!> <!></div>');function Nt(r,a){Xe(a,!1);let i=z([]),f=z(!1),p=z(""),_=z(!1),g=z(!1),k=null,d=z({name:"",phone:"",email:"",company:"",notes:"",label:"",assignedTo:""}),c=z(""),v=z([]);Ye(()=>{A()});async function A(){b(f,!0),b(p,"");try{const t=await fetch("/api/contacts");if(!t.ok)throw new Error("Failed to fetch contacts");const u=await t.json();b(i,u.contacts||[]),b(i,e(i).map((T,O)=>({...T,id:T.id||`temp-${Date.now()}-${O}`}))),console.log("Fetched contacts:",e(i))}catch(t){b(p,t instanceof Error?t.message:"An error occurred")}finally{b(f,!1)}}async function j(){try{const t=await fetch("/api/contacts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e(d))});if(!t.ok){const u=await t.json();throw new Error(u.error||"Failed to create contact")}await A(),w(),b(_,!1)}catch(t){b(p,t instanceof Error?t.message:"An error occurred")}}async function D(){if(k)try{const t=await fetch(`/api/contacts?id=${k.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e(d))});if(!t.ok){const u=await t.json();throw new Error(u.error||"Failed to update contact")}await A(),w(),b(g,!1),k=null}catch(t){b(p,t instanceof Error?t.message:"An error occurred")}}async function $(t){if(confirm("Are you sure you want to delete this contact?"))try{const u=await fetch(`/api/contacts?id=${t}`,{method:"DELETE"});if(!u.ok){const T=await u.json();throw new Error(T.error||"Failed to delete contact")}await A()}catch(u){b(p,u instanceof Error?u.message:"An error occurred")}}function m(t){k=t,b(d,{...t}),b(g,!0)}function w(){b(d,{name:"",phone:"",email:"",company:"",notes:"",label:"",assignedTo:""})}function se(){w(),b(_,!0),b(g,!1)}function J(){b(_,!1),b(g,!1),k=null,w()}Ze(()=>(e(c),e(i)),()=>{e(c).trim()===""?b(v,e(i)||[]):b(v,(e(i)||[]).filter(t=>t&&t.id&&(t.name&&t.name.toLowerCase().includes(e(c).toLowerCase())||t.phone&&t.phone.includes(e(c))||t.email&&t.email.toLowerCase().includes(e(c).toLowerCase())||t.company&&t.company.toLowerCase().includes(e(c).toLowerCase())||t.label&&t.label.toLowerCase().includes(e(c).toLowerCase())||t.assignedTo&&t.assignedTo.toLowerCase().includes(e(c).toLowerCase()))))}),He(),Re();var Z=Tt();Qe(t=>{tt.title="Contacts - WhatsApp Chat Portal"});var oe=s(l(Z),2);{var me=t=>{var u=pt(),T=l(u),O=s(T);n(u),q(()=>F(T,`${e(p)??""} `)),K("click",O,()=>b(p,"")),he(3,u,()=>$e),E(t,u)};M(oe,t=>{e(p)&&t(me)})}var W=s(oe,2),H=l(W),ie=l(H);Y(ie),n(H);var Q=s(H,2);n(W);var ke=s(W,2);{var Ne=t=>{var u=mt();E(t,u)},Se=t=>{var u=at(),T=rt(u);{var O=U=>{var P=bt(),N=l(P),o=l(N,!0);n(N),n(P),q(()=>F(o,e(c)?"No contacts found matching your search.":"No contacts yet. Add your first contact!")),E(U,P)},ne=U=>{var P=Ct();ot(P,7,()=>e(v),(N,o)=>N.id||`contact-${o}`,(N,o)=>{var B=wt(),V=l(B),ee=l(V),G=l(ee),be=l(G,!0);n(G);var te=s(G,2),ye=l(te,!0);n(te),n(ee);var ae=s(ee,2),le=l(ae),de=s(le,2);n(ae),n(V);var ce=s(V,2);{var ue=y=>{var x=yt(),S=s(l(x));n(x),q(()=>F(S,` ${e(o),C(()=>e(o).email)??""}`)),E(y,x)};M(ce,y=>{e(o),C(()=>e(o).email)&&y(ue)})}var fe=s(ce,2);{var ge=y=>{var x=gt(),S=s(l(x));n(x),q(()=>F(S,` ${e(o),C(()=>e(o).company)??""}`)),E(y,x)};M(fe,y=>{e(o),C(()=>e(o).company)&&y(ge)})}var re=s(fe,2);{var we=y=>{var x=_t(),S=s(l(x));n(x),q(()=>F(S,` ${e(o),C(()=>e(o).notes)??""}`)),E(y,x)};M(re,y=>{e(o),C(()=>e(o).notes)&&y(we)})}var _e=s(re,2);{var h=y=>{var x=xt(),S=s(l(x),2),Me=l(S,!0);n(S),n(x),q(()=>F(Me,(e(o),C(()=>e(o).label)))),E(y,x)};M(_e,y=>{e(o),C(()=>e(o).label)&&y(h)})}var ve=s(_e,2);{var Pe=y=>{var x=ht(),S=s(l(x));n(x),q(()=>F(S,` ${e(o),C(()=>e(o).assignedTo)??""}`)),E(y,x)};M(ve,y=>{e(o),C(()=>e(o).assignedTo)&&y(Pe)})}var Te=s(ve,2),qe=l(Te);n(Te),n(B),q(y=>{F(be,(e(o),C(()=>e(o).name))),F(ye,(e(o),C(()=>e(o).phone))),F(qe,`Created: ${y??""}`)},[()=>(e(o),C(()=>new Date(e(o).createdAt).toLocaleDateString()))]),K("click",le,()=>m(e(o))),K("click",de,()=>$(e(o).id)),he(3,B,()=>Fe,()=>({y:20,duration:300,easing:vt})),E(N,B)}),n(P),E(U,P)};M(T,U=>{e(v),C(()=>e(v).length===0)?U(O):U(ne,!1)},!0)}E(t,u)};M(ke,t=>{e(f)?t(Ne):t(Se,!1)})}var je=s(ke,2);{var Oe=t=>{var u=kt(),T=l(u),O=l(T),ne=l(O),U=l(ne,!0);n(ne);var P=s(ne,2);n(O);var N=s(O,2),o=l(N),B=s(l(o),2);Y(B),n(o);var V=s(o,2),ee=s(l(V),2);Y(ee),n(V);var G=s(V,2),be=s(l(G),2);Y(be),n(G);var te=s(G,2),ye=s(l(te),2);Y(ye),n(te);var ae=s(te,2),le=s(l(ae),2);st(le),n(ae);var de=s(ae,2),ce=s(l(de),2);Y(ce),n(de);var ue=s(de,2),fe=s(l(ue),2);Y(fe),n(ue);var ge=s(ue,2),re=l(ge),we=l(re,!0);n(re);var _e=s(re,2);n(ge),n(N),n(T),n(u),q(()=>{F(U,e(_)?"Add New Contact":"Edit Contact"),F(we,e(_)?"Create Contact":"Update Contact")}),K("click",P,J),I(B,()=>e(d).name,h=>X(d,e(d).name=h)),I(ee,()=>e(d).phone,h=>X(d,e(d).phone=h)),I(be,()=>e(d).email,h=>X(d,e(d).email=h)),I(ye,()=>e(d).company,h=>X(d,e(d).company=h)),I(le,()=>e(d).notes,h=>X(d,e(d).notes=h)),I(ce,()=>e(d).label,h=>X(d,e(d).label=h)),I(fe,()=>e(d).assignedTo,h=>X(d,e(d).assignedTo=h)),K("click",_e,J),K("submit",N,ct(function(...h){var ve;(ve=e(_)?j:D)==null||ve.apply(this,h)})),he(3,T,()=>Fe,()=>({y:20,duration:300})),he(3,u,()=>$e),E(t,u)};M(je,t=>{(e(_)||e(g))&&t(Oe)})}n(Z),I(ie,()=>e(c),t=>b(c,t)),K("click",Q,se),E(r,Z),et()}export{Nt as component};
